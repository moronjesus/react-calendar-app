(this["webpackJsonpcalendar-app"]=this["webpackJsonpcalendar-app"]||[]).push([[0],{148:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(0),c=n.n(r),o=n(9),i=n.n(o),s=n(15),u=n(28),l=n(196),d=n(190),j=n(193),b=n(152),m=n(195),p=n(194),O=n(108),f=n.n(O),h=n(24),v=n.n(h),g=n(48),x=n(33),y=n.n(x),E="https://calendarbackend-app.herokuapp.com/api",w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(E,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(E,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":r}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":r},body:JSON.stringify(t)})},C="[ui] OPEN MODAL ",S="[ui] CLOSE MODAL",N="[event] CLEAR LOGOUT",T="[event] ADD EVENT",D="[event] SET ACTIVE ",A="[event] CLEAR ACTIVE EVENT ",I="[event] EVENT UPDATED ",L="[event] EVENT DELETED ",V="[event]  EVENT LOADED ",P="[auth] LOGIN",G="[auth] LOGOUT",R="[auth] FINISH CHECKING",W=n(10),H=n(31),M=n.n(H),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object(W.a)(Object(W.a)({},e),{},{end:M()(e.end).toDate(),start:M()(e.start).toDate()})}))},q=function(e){return{type:T,payload:e}},B=function(){return{type:A}},F=function(e){return{type:I,payload:e}},U=function(){return{type:L}},z=function(e){return{type:V,payload:e}},J={type:N},X=function(){return{type:R}},K=function(e){return{type:P,payload:e}},Q=function(){return{type:G}},Y=n(109),Z=n.n(Y),$=function(){var e=ee(),t=Object(s.c)((function(e){return e.auth})).name,n=Object(s.b)();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(d.a,{position:"static",children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(p.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(a.jsx)(f.a,{})}),Object(a.jsx)(b.a,{variant:"h6",className:e.title,children:t}),Object(a.jsx)(m.a,{color:"inherit",onClick:function(){n((function(e){localStorage.clear(),e(Q()),e(J)}))},className:e.butonLogout,endIcon:Object(a.jsx)(Z.a,{}),children:"Logout"})]})})})},ee=Object(l.a)((function(e){return{root:{flexGrow:1,marginBottom:20},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},butonLogout:{margin:e.spacing(1)}}})),te=n(91),ne=(n(145),n(146),n(204)),ae=n(205),re={allDay:"Todo el d\xeda",previous:"<",next:">",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango",showMore:function(e){return"+ Ver m\xe1s (".concat(e,")")}},ce=function(e){var t=e.event,n=t.title,r=t.user;return Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:n}),Object(a.jsxs)("span",{children:[" - ",r.name]})]})},oe=n(59),ie=n(208),se=n(210),ue=n(201),le=n(199),de=n(197),je=n(211),be=n(198),me=n(116),pe=n(21),Oe=n(207),fe=function(){return{type:C}},he=M()().minutes(0).seconds(0).add(1,"hours"),ve=he.clone().add(1,"hours"),ge={title:"",notes:"",start:he.toDate(),end:ve.toDate()},xe=function(){var e=ye(),t=Object(s.c)((function(e){return e.ui})).modal,n=Object(s.c)((function(e){return e.calendar})).activeEvent,o=Object(s.b)(),i=Object(r.useState)(ge),l=Object(u.a)(i,2),d=l[0],j=l[1],b=d.title,p=d.notes,O=d.start,f=d.end,h=Object(r.useState)(!1),x=Object(u.a)(h,2),E=x[0],w=x[1],C=c.a.useState(""),N=Object(u.a)(C,2),T=N[0],D=N[1];Object(r.useEffect)((function(){j(n||ge)}),[n,j]);var A=function(e){var t=e.target;j(Object(W.a)(Object(W.a)({},d),{},Object(oe.a)({},t.name,t.value)))},I=function(){o({type:S}),o(B()),j(ge)};return Object(a.jsx)("div",{children:Object(a.jsx)(se.a,{open:t,onClose:I,"aria-labelledby":"form-dialog-title",disableBackdropClick:!t,children:Object(a.jsxs)("form",{className:e.root,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault();var t,a=M()(O),r=M()(f);return a.isSameOrAfter(r)?(D("La fecha fin debe ser mayor a la fecha de inicio"),w(!0)):b.trim().length<2?(D("El campo titulo es obligatorio"),w(!0)):p.trim().length<2?(D("El campo nota es obligatorio"),w(!0)):(o(n?(t=d,function(){var e=Object(g.a)(v.a.mark((function e(n){var a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("event/".concat(t.id),t,"PUT");case 3:return a=e.sent,e.next=6,a.json();case 6:(r=e.sent).ok?(y.a.fire({icon:"success",text:"Evento modificado con \xe9xitoso"}),n(F(t))):y.a.fire("Eror",r.msg,"error"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()):function(e){return function(){var t=Object(g.a)(v.a.mark((function t(n,a){var r,c,o,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth,c=r.uid,o=r.name,t.prev=1,t.next=4,k("event",e,"POST");case 4:return i=t.sent,t.next=7,i.json();case 7:(s=t.sent).ok&&(e.id=s.event.id,e.user={_id:c,name:o},y.a.fire({icon:"success",text:"Registro \xe9xitoso"}),n(q(e))),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(1);case 13:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(d)),void I())},children:[n?Object(a.jsx)(de.a,{id:"form-dialog-title",children:"Editando evento"}):Object(a.jsx)(de.a,{id:"form-dialog-title",children:"Nuevo evento"}),Object(a.jsx)(be.a,{}),Object(a.jsxs)(le.a,{children:[Object(a.jsxs)(pe.a,{utils:me.a,children:[Object(a.jsx)(Oe.a,{variant:"inline",ampm:!1,label:"Inicio de vento",value:O,onChange:function(e){j(Object(W.a)(Object(W.a)({},d),{},{start:e}))},format:"yyyy/MM/dd HH:mm"}),Object(a.jsx)(Oe.a,{variant:"inline",ampm:!1,label:"Fin de evento",value:f,onChange:function(e){j(Object(W.a)(Object(W.a)({},d),{},{end:e}))},format:"yyyy/MM/dd HH:mm",minDate:O})]}),Object(a.jsx)(de.a,{children:"Titulo y notas"}),Object(a.jsx)(je.a,{open:E,autoHideDuration:4e3,onClose:function(){w(!1)},ContentProps:{className:e.snackbarColor},message:T}),Object(a.jsx)(ie.a,{id:"outlined-basic",label:"T\xedtulo ",variant:"outlined",margin:"dense",fullWidth:!0,name:"title",value:b,onChange:A}),Object(a.jsx)(ie.a,{id:"outlined-textarea",label:"Nota",multiline:!0,rows:4,fullWidth:!0,variant:"outlined",name:"notes",value:p,onChange:A})]}),Object(a.jsxs)(ue.a,{children:[Object(a.jsx)(m.a,{onClick:I,color:"primary",children:"Cancel"}),Object(a.jsx)(m.a,{color:"primary",type:"submit",children:"Save"})]})]})})})},ye=Object(l.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(.9)}},container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},snackbarColor:{backgroundColor:"#cd2f2f"}}})),Ee=n(203),we=n(113),ke=n.n(we),Ce=function(){var e=Se(),t=Object(s.b)();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(Ee.a,{color:"primary","aria-label":"add",onClick:function(){t(fe()),t(B())},children:Object(a.jsx)(ke.a,{})})})},Se=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),bottom:25,padding:25,position:"fixed",right:25}}}})),Ne=n(114),Te=n.n(Ne),De=function(){var e=Ae(),t=Object(s.b)();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(Ee.a,{color:"secondary","aria-label":"delete",onClick:function(){t(function(){var e=Object(g.a)(v.a.mark((function e(t,n){var a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().calendar.activeEvent.id,e.prev=1,e.next=4,k("event/".concat(a),{},"DELETE");case 4:return r=e.sent,e.next=7,r.json();case 7:(c=e.sent).ok?(t(U()),y.a.fire({icon:"info",text:"Evento eliminado"})):y.a.fire("Eror",c.msg,"error"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}())},children:Object(a.jsx)(Te.a,{})})})},Ae=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),bottom:95,padding:25,position:"fixed",right:25}}}}));M.a.locale("es");var Ie=Object(te.b)(M.a),Le=function(){var e=Object(r.useState)(localStorage.getItem("lastView")||"month"),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(s.b)(),i=Object(s.c)((function(e){return e.calendar})),l=i.events,d=i.activeEvent,j=Object(s.c)((function(e){return e.auth})).uid;Object(r.useEffect)((function(){o(function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("event");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r=_(a.msg),t(z(r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[o]);return Object(a.jsxs)("div",{children:[Object(a.jsx)($,{}),Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(ne.a,{className:"card",children:Object(a.jsx)(ae.a,{children:Object(a.jsx)(te.a,{localizer:Ie,events:l,startAccessor:"start",endAccessor:"end",messages:re,onDoubleClickEvent:function(e){o(fe())},onSelectEvent:function(e){o({type:D,payload:e})},onSelectSlot:function(e){o(B())},selectable:!0,className:"calendar-screen",eventPropGetter:function(e,t,n,a){return{style:{boxShadow:"2px 2px 8px 0 #BEBFC2",backgroundColor:e.user._id===j?"#091175":"#D0E726",borderRadius:"5px",opacity:.8,display:"block",color:"#ffffff",fontFamily:"Helvetica, Arial, sans-serif",marginTop:2,marginBottom:2,padding:4,fontSize:14}}},dayPropGetter:function(){return{style:{margin:2,boxShadow:" 0px 1px 1px #c2c2c2"}}},onView:function(e){c(e),localStorage.setItem("lastView",e)},view:n,components:{event:ce}})})})}),Object(a.jsx)(Ce,{}),d&&Object(a.jsx)(De,{}),Object(a.jsx)(xe,{})]})},Ve=n(17),Pe=n(212),Ge=n(206),Re=n(42),We=n(94),He=n(209),Me=n(202),_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(u.a)(t,2),a=n[0],c=n[1],o=function(){c(e)},i=function(e){var t=e.target;c(Object(W.a)(Object(W.a)({},a),{},Object(oe.a)({},t.name,t.value)))};return[a,i,o]},qe=n.p+"static/media/imgCalendar.e631632d.jpg",Be=function(){return{email:"",password:""}},Fe=function(){var e=Object(s.b)(),t=Ue(),n=_e(Be),r=Object(u.a)(n,2),c=r[0],o=r[1],i=c.email,l=c.password;return Object(a.jsxs)(Me.a,{container:!0,component:"main",className:t.root,children:[Object(a.jsx)(Ge.a,{}),Object(a.jsx)(Me.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),Object(a.jsx)(Me.a,{item:!0,xs:12,sm:8,md:5,component:We.a,elevation:6,square:!0,children:Object(a.jsxs)("div",{className:t.paper,children:[Object(a.jsx)(Pe.a,{className:t.avatar}),Object(a.jsx)(b.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(){var n=Object(g.a)(v.a.mark((function n(a){var r,c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w("auth",{email:e,password:t},"POST");case 2:return r=n.sent,n.next=5,r.json();case 5:(c=n.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),a(K({uid:c.uid,name:c.name}))):y.a.fire("Error",c.msg,"error");case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(i,l))},children:[Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:i,autoComplete:"email",autoFocus:!0,onChange:o}),Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:l,autoComplete:"current-password",onChange:o}),Object(a.jsx)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Sign In"}),Object(a.jsx)(Re.b,{to:"/auth/register",children:"Don't have an account? Sign Up"}),Object(a.jsx)(He.a,{mt:5})]})]})})]})},Ue=Object(l.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(".concat(qe,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1),textAlign:"center"},submit:{margin:e.spacing(3,0,2)}}})),ze=function(){return{name:"",email:"",password:"",confirmpassword:""}},Je=function(){var e=Object(s.b)(),t=Xe(),n=_e(ze),r=Object(u.a)(n,2),c=r[0],o=r[1],i=c.name,l=c.email,d=c.password,j=c.confirmpassword;return Object(a.jsxs)(Me.a,{container:!0,component:"main",className:t.root,children:[Object(a.jsx)(Ge.a,{}),Object(a.jsx)(Me.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),Object(a.jsx)(Me.a,{item:!0,xs:12,sm:8,md:5,component:We.a,elevation:6,square:!0,children:Object(a.jsxs)("div",{className:t.paper,children:[Object(a.jsx)(Pe.a,{className:t.avatar}),Object(a.jsx)(b.a,{component:"h1",variant:"h5",children:"Register"}),Object(a.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:function(t){t.preventDefault(),d!==j?y.a.fire("Error","Los password no son iguales","error"):e(function(e,t,n){return function(){var a=Object(g.a)(v.a.mark((function a(r){var c,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,w("auth/register",{name:e,email:t,password:n},"POST");case 2:return c=a.sent,a.next=5,c.json();case 5:(o=a.sent).ok?(localStorage.setItem("token",o.token),localStorage.setItem("token-init",(new Date).getTime()),r(K({uid:o.uid,name:o.name}))):y.a.fire("Error",o.msg,"error");case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(i,l,d))},children:[Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",onChange:o,value:i}),Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",onChange:o,value:l}),Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:o,value:d}),Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"password",id:"confirmpassword",label:"Confirm password",name:"confirmpassword",onChange:o,value:j}),Object(a.jsx)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Register"}),Object(a.jsx)(Re.b,{to:"/auth/login",children:"Alredy registered?"})]})]})})]})},Xe=Object(l.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(".concat(qe,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1),textAlign:"center"},submit:{margin:e.spacing(3,0,2)}}})),Ke=function(){return Object(a.jsxs)(Ve.d,{children:[Object(a.jsx)(Ve.b,{exact:!0,path:"/auth/login",component:Fe}),Object(a.jsx)(Ve.b,{exact:!0,path:"/auth/register",component:Je}),Object(a.jsx)(Ve.a,{to:"/auth/login"})]})},Qe=n(81),Ye=function(e){var t=e.isAunthenticated,n=e.component,r=Object(Qe.a)(e,["isAunthenticated","component"]);return Object(a.jsx)(Ve.b,Object(W.a)(Object(W.a)({},r),{},{component:function(e){return t?Object(a.jsx)(Ve.a,{to:"/"}):Object(a.jsx)(n,Object(W.a)({},e))}}))},Ze=function(e){var t=e.isAunthenticated,n=e.component,r=Object(Qe.a)(e,["isAunthenticated","component"]);return Object(a.jsx)(Ve.b,Object(W.a)(Object(W.a)({},r),{},{component:function(e){return t?Object(a.jsx)(n,Object(W.a)({},e)):Object(a.jsx)(Ve.a,{to:"/auth/login"})}}))},$e=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth})),n=t.checking,c=t.uid;return Object(r.useEffect)((function(){e(function(){var e=Object(g.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok?(localStorage.setItem("token",a.token),localStorage.setItem("token-init",(new Date).getTime()),t(K({uid:a.uid,name:a.name}))):t(X());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?Object(a.jsx)("h5",{children:"Espere..."}):Object(a.jsx)(Re.a,{children:Object(a.jsx)("div",{children:Object(a.jsxs)(Ve.d,{children:[Object(a.jsx)(Ye,{path:"/auth",component:Ke,isAunthenticated:!!c}),Object(a.jsx)(Ze,{exact:!0,path:"/",component:Le,isAunthenticated:!!c}),Object(a.jsx)(Ve.a,{to:"/auth/login"})]})})})},et=n(53),tt={checking:!0},nt=n(92),at={events:[],activeEvent:null},rt={modal:!1},ct=Object(et.c)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(W.a)(Object(W.a)({},e),{},{modal:!0});case S:return Object(W.a)(Object(W.a)({},e),{},{modal:!1});default:return e}},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(W.a)(Object(W.a)({},e),{},{events:[].concat(Object(nt.a)(e.events),[t.payload])});case D:return Object(W.a)(Object(W.a)({},e),{},{activeEvent:t.payload});case A:return Object(W.a)(Object(W.a)({},e),{},{activeEvent:null});case I:return Object(W.a)(Object(W.a)({},e),{},{events:e.events.map((function(e){return e.id===t.payload.id?t.payload:e}))});case L:return Object(W.a)(Object(W.a)({},e),{},{events:e.events.filter((function(t){return t.id!==e.activeEvent.id})),activeEvent:null});case V:return Object(W.a)(Object(W.a)({},e),{},{events:Object(nt.a)(t.payload)});case N:return Object(W.a)({},at);default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(W.a)(Object(W.a)({},e),{},{checking:!1,uid:t.payload.uid,name:t.payload.name});case R:return Object(W.a)(Object(W.a)({},e),{},{checking:!1});case G:return{checking:!1};default:return e}}}),ot=n(115),it="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||et.d,st=Object(et.e)(ct,it(Object(et.a)(ot.a))),ut=function(){return Object(a.jsx)(s.a,{store:st,children:Object(a.jsx)($e,{})})};n(148);i.a.render(Object(a.jsx)(ut,{}),document.getElementById("root"))}},[[149,1,2]]]);
//# sourceMappingURL=main.1ca6aa2a.chunk.js.map